var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){var t=new egret.DisplayObjectContainer;this.addChild(t),console.log(SceneController.instance),SceneController.instance.setStage(t),SceneController.initGame()},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,s=t.map(function(t){return i.parse(t)}),a=this.textfield,r=-1,o=function(){r++,r>=s.length&&(r=0);var t=s[r];a.textFlow=t;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(o,e)};o()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var p2DebugDraw=function(){function t(t){this.COLOR_D_SLEEP=10066329,this.COLOR_D_WAKE=15053490,this.COLOR_K=10329589,this.COLOR_S=8381823,this.lineWidth=1,this.world=t}return t.prototype.setSprite=function(t){this.sprite=t},t.prototype.setLineWidth=function(t){this.lineWidth=t},t.prototype.drawDebug=function(){this.sprite.graphics.clear();for(var t=this.world.bodies.length,e=0;t>e;e++)for(var i=this.world.bodies[e],s=0;s<i.shapes.length;s++){var a=i.shapes[s];a instanceof p2.Box?this.drawBox(a,i):a instanceof p2.Convex?this.drawConvex(a,i):a instanceof p2.Circle?this.drawCircle(a,i):a instanceof p2.Line?this.drawLine(a,i):a instanceof p2.Particle?this.drawParticle(a,i):a instanceof p2.Plane?this.drawPlane(a,i):a instanceof p2.Capsule?this.drawCapsule(a,i):a instanceof p2.Heightfield&&this.drawHeightfield(a,i)}},t.prototype.drawRay=function(t,e,i){var s=this.sprite.graphics;s.lineStyle(this.lineWidth,i),s.moveTo(t[0],t[1]),s.lineTo(e[0],e[1]),s.endFill()},t.prototype.drawBox=function(t,e){this.drawConvex(t,e)},t.prototype.drawCircle=function(t,e){var i=this.getColor(e),s=this.sprite.graphics;s.lineStyle(this.lineWidth,i),s.beginFill(i,.5);var a=t.position[0],r=t.position[1],o=[];e.toWorldFrame(o,[a,r]),s.drawCircle(o[0],o[1],t.radius);var n=a+t.radius,h=r+0,l=new Array;e.toWorldFrame(l,[n,h]),s.moveTo(o[0],o[1]),s.lineTo(l[0],l[1]),s.endFill()},t.prototype.drawCapsule=function(t,e){var i=this.getColor(e),s=t.position[0],a=t.position[1],r=t.angle,o=t.length,n=t.radius,h=new Array,l=new Array,d=new Array,g=new Array,c=new Array,p=new Array;p2.vec2.rotate(h,[-o/2,-n],r),p2.vec2.rotate(l,[o/2,-n],r),p2.vec2.rotate(d,[o/2,n],r),p2.vec2.rotate(g,[-o/2,n],r),p2.vec2.rotate(c,[o/2,0],r),p2.vec2.rotate(p,[-o/2,0],r);var m=new Array,u=new Array,y=new Array,v=new Array,f=new Array,w=new Array;e.toWorldFrame(m,[s+h[0],a+h[1]]),e.toWorldFrame(u,[s+l[0],a+l[1]]),e.toWorldFrame(y,[s+d[0],a+d[1]]),e.toWorldFrame(v,[s+g[0],a+g[1]]),e.toWorldFrame(f,[s+c[0],a+c[1]]),e.toWorldFrame(w,[s+p[0],a+p[1]]);var S=this.sprite.graphics;S.lineStyle(this.lineWidth,i),S.beginFill(i,.5),S.drawCircle(f[0],f[1],n),S.endFill(),S.lineStyle(this.lineWidth,i),S.beginFill(i,.5),S.drawCircle(w[0],w[1],n),S.endFill(),S.lineStyle(this.lineWidth,i),S.beginFill(i,.5),S.moveTo(m[0],m[1]),S.lineTo(u[0],u[1]),S.lineTo(y[0],y[1]),S.lineTo(v[0],v[1]),S.endFill()},t.prototype.drawLine=function(t,e){var i=this.getColor(e),s=t.position[0],a=t.position[1],r=t.angle,o=t.length,n=new Array,h=new Array;p2.vec2.rotate(n,[-o/2,0],r),p2.vec2.rotate(h,[o/2,0],r);var l=[],d=[];e.toWorldFrame(l,[s+n[0],a+n[1]]),e.toWorldFrame(d,[s+h[0],a+h[1]]);var g=this.sprite.graphics;g.lineStyle(this.lineWidth,i),g.moveTo(l[0],l[1]),g.lineTo(d[0],d[1]),g.endFill()},t.prototype.drawHeightfield=function(t,e){var i=this.getColor(e),s=t.heights,a=s.length,r=t.elementWidth;if(a>0){var o=t.position[0],n=t.position[1],h=[],l=[],d=0,g=this.sprite.graphics;g.lineStyle(this.lineWidth,i),g.beginFill(i,.5),e.toWorldFrame(l,[o+d,n-100]),g.moveTo(l[0],l[1]);for(var c=0;a>c;c++){var p=s[c];e.toWorldFrame(h,[o+d+c*r,n+p]),g.lineTo(h[0],h[1])}e.toWorldFrame(h,[o+d+a*r,n-100]),g.lineTo(h[0],h[1]),g.endFill()}},t.prototype.drawParticle=function(t,e){var i=this.getColor(e),s=this.sprite.graphics;s.lineStyle(this.lineWidth,i),s.beginFill(i,.5);var a=t.position[0],r=t.position[1],o=e.position[0]+a,n=e.position[1]+r;s.drawCircle(o,n,this.lineWidth),s.endFill(),s.lineStyle(this.lineWidth,i),s.drawCircle(o,n,5*this.lineWidth),s.endFill()},t.prototype.drawConvex=function(t,e){var i=this.getColor(e),s=t.vertices.length,a=this.sprite.graphics;a.lineStyle(this.lineWidth,i),a.beginFill(i,.5);var r=t.position[0],o=t.position[1],n=new Array;e.toWorldFrame(n,[r,o]);var h=t.vertices[0],l=[r+h[0],o+h[1]],d=new Array;e.toWorldFrame(d,l),a.moveTo(n[0],n[1]),a.lineTo(d[0],d[1]);for(var g=1;s>=g;g++)h=t.vertices[g%s],l=[r+h[0],o+h[1]],e.toWorldFrame(d,l),a.lineTo(d[0],d[1]);a.endFill()},t.prototype.drawPlane=function(t,e){var i=this.COLOR_D_SLEEP,s=this.sprite.graphics;s.lineStyle(this.lineWidth,i),s.beginFill(i,1);var a=t.position[0],r=t.position[1],o=t.angle,n=new Array,h=new Array,l=[],d=[];p2.vec2.rotate(n,[-1e3,0],o),e.toWorldFrame(l,[a+n[0],r+n[1]]),s.moveTo(l[0],l[1]),p2.vec2.rotate(h,[1e3,0],o),e.toWorldFrame(d,[a+h[0],r+h[1]]),s.lineTo(d[0],d[1]),p2.vec2.rotate(h,[1e3,-1e3],o),e.toWorldFrame(d,[a+h[0],r+h[1]]),s.lineTo(d[0],d[1]),p2.vec2.rotate(h,[-1e3,-1e3],o),e.toWorldFrame(d,[a+h[0],r+h[1]]),s.lineTo(d[0],d[1]),p2.vec2.rotate(h,[-1e3,-0],o),e.toWorldFrame(d,[a+h[0],r+h[1]]),s.lineTo(d[0],d[1]),s.endFill()},t.prototype.getColor=function(t){var e=this.COLOR_D_SLEEP;return t.type==p2.Body.KINEMATIC?e=this.COLOR_K:t.type==p2.Body.STATIC?e=this.COLOR_S:t.sleepState==p2.Body.AWAKE&&(e=this.COLOR_D_WAKE),e},t}();__reflect(p2DebugDraw.prototype,"p2DebugDraw");var GameScene=function(t){function e(){var e=t.call(this)||this;return e.lastBlockPos=2,e.startY=0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.firstInit,e),e.touchEnabled=!1,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHander,e),e}return __extends(e,t),e.prototype.initView=function(){var t=this,e=new egret.Shape;e.graphics.beginFill(Gamedata.colorDRed),e.graphics.drawRect(0,0,this.stage.stageWidth/5,this.stage.stageHeight),e.graphics.endFill(),this.addChild(e);var i=new egret.Shape;i.graphics.beginFill(Gamedata.colorLred),i.graphics.drawRect(this.stage.stageWidth/5,0,this.stage.stageWidth/5,this.stage.stageHeight),i.graphics.endFill(),this.addChild(i);var s=new egret.Shape;s.graphics.beginFill(Gamedata.colorDRed),s.graphics.drawRect(2*this.stage.stageWidth/5,0,this.stage.stageWidth/5,this.stage.stageHeight),s.graphics.endFill(),this.addChild(s);var a=new egret.Shape;a.graphics.beginFill(Gamedata.colorLred),a.graphics.drawRect(3*this.stage.stageWidth/5,0,this.stage.stageWidth/5,this.stage.stageHeight),a.graphics.endFill(),this.addChild(a);var r=new egret.Shape;r.graphics.beginFill(Gamedata.colorDRed),r.graphics.drawRect(4*this.stage.stageWidth/5,0,this.stage.stageWidth/5,this.stage.stageHeight),r.graphics.endFill(),this.addChild(r),this.UIContainer=new egret.DisplayObjectContainer,this.RoleContainer=new egret.DisplayObjectContainer,this.BlockContainer=new egret.DisplayObjectContainer,this.MsgContainer=new egret.DisplayObjectContainer,this.addChild(this.BlockContainer),this.addChild(this.RoleContainer),this.addChild(this.UIContainer),this.addChild(this.MsgContainer),this.gameScore=new egret.TextField,this.gameScore.text="Score:"+Gamedata.score,this.gameScore.x=20,this.gameScore.y=35,this.gameScore.size=70,this.gameScore.textColor=Gamedata.colorLBlue,this.UIContainer.addChild(this.gameScore);var o=new egret.Bitmap;o.texture=RES.getRes("pause_png"),o.x=this.stage.stageWidth-o.width-20,o.y=20,o.width=100,o.height=100,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("恢复游戏状态"),SceneController.pauseGame()},this),this.UIContainer.addChild(o),this.birthdayImg=new egret.Bitmap,this.birthdayImg.texture=RES.getRes("birthaday_png"),this.birthdayImg.width=400,this.birthdayImg.height=500,this.birthdayImg.x=0-this.birthdayImg.width,this.birthdayImg.y=this.stage.stageHeight/2-this.birthdayImg.height/2,this.UIContainer.addChild(this.birthdayImg),this.world=new p2.World,this.world.gravity=[0,9.8],this.debugDraw=new p2DebugDraw(this.world);var n=new egret.Sprite;this.debugDraw.setSprite(n),this.addChild(n),this.mat1=new p2.Material(1),this.mat2=new p2.Material(2);var h=new p2.ContactMaterial(this.mat1,this.mat2);this.world.addContactMaterial(h),this.blocks=new Array;var l=this.stage.stageWidth/5-5,d=this.stage.stageWidth/5,g=this.stage.stageHeight/d+1;this.startY=this.stage.stageHeight-d*g;for(var c=0;g>c;c++)if(0===c){var p=2,m=p*this.stage.stageWidth/5+this.stage.stageWidth/10,u=this.stage.stageHeight-d*(c+1),y=new Block(this.BlockContainer,m,u,l,d,this.mat1);this.world.addBody(y.BlockBody),this.blocks.push(y)}else{var p=Math.random()>.5?this.lastBlockPos+1:this.lastBlockPos-1;p>4&&(p=4),0>p&&(p=0),this.lastBlockPos=p;var m=p*this.stage.stageWidth/5+this.stage.stageWidth/10,u=this.stage.stageHeight-d*(c+1),y=new Block(this.BlockContainer,m,u,l,d,this.mat1);this.world.addBody(y.BlockBody),this.blocks.push(y)}this.role=new Role(this.RoleContainer,this.stage.stageWidth/2,this.stage.stageHeight-d-100,50,70,this.mat2),this.world.addBody(this.role.roleBody),this.role.rolelImg.addEventListener("Lose",function(){console.log("game lose!"),SceneController.pauseGame(),SceneController.endGame()},this);var v=this;this.world.on("beginContact",function(e){if(Gamedata.hasStart){t.touchEnabled=!0;var i=e.bodyA===v.role.roleBody?e.bodyB:e.bodyA;if(v.role.roleBody.velocity[0]=0,v.role.roleBody.position[0]=i.position[0],Gamedata.score++,v.gameScore.text="Score:"+Gamedata.score,21===Gamedata.score&&(t.tw1=egret.Tween.get(t.birthdayImg),t.tw1.to({x:t.stage.stageWidth/2-t.birthdayImg.width/2},400).wait(3e3).to({x:t.stage.stageWidth},300)),Gamedata.score%10==0&&Gamedata.score>0)for(var s=0;s<t.blocks.length;s++)t.blocks[s].BlockBody.velocity[1]+=30;t.role.tx.text=t.role.textArr[Gamedata.score/3]}});var f=new egret.Shape;f.graphics.beginFill(Gamedata.colorLBlue,1),f.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),f.graphics.endFill(),f.alpha=.5;var w=new egret.TextField;w.text="点击空白处开始游戏",w.size=70,w.fontFamily="KaiTi",w.x=this.stage.stageWidth/2-w.width/2,w.y=this.stage.stageHeight/2-w.height/2;var S=new egret.TextField;S.text="向左跳",S.size=40,S.fontFamily="KaiTi",S.anchorOffsetX=S.width/2,S.x=this.stage.stageWidth/6,S.y=this.stage.stageHeight/2+200;var C=new egret.TextField;C.text="向上跳",C.size=40,C.fontFamily="KaiTi",C.x=this.stage.stageWidth/2-C.width/2,C.y=this.stage.stageHeight/2+200;var R=new egret.TextField;R.text="向右跳",R.size=40,R.fontFamily="KaiTi",R.anchorOffsetX=R.width/2,R.x=this.stage.stageWidth-this.stage.stageWidth/6,R.y=this.stage.stageHeight/2+200,this.MsgContainer.addChild(f),this.MsgContainer.addChild(w),this.MsgContainer.addChild(S),this.MsgContainer.addChild(C),this.MsgContainer.addChild(R),f.touchEnabled=!0,f.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.MsgContainer.removeChildren(),t.startGame(),t.touchEnabled=!0},this)},e.prototype.startGame=function(){for(var t=0;t<this.blocks.length;t++)this.blocks[t].BlockBody.velocity=[0,70];Gamedata.hasStart=!0},e.prototype.initTicker=function(){egret.Ticker.getInstance().register(function(t){this.world.step(t/1e3),this.refleshView()},this)},e.prototype.firstInit=function(){this.jumpM=new egret.Sound,this.jumpM=RES.getRes("jumpM_mp3"),this.initView(),this.initTicker()},e.prototype.reInitGame=function(){this.removeChildren(),this.UIContainer=null,this.RoleContainer=null,this.BlockContainer=null,this.MsgContainer=null,this.blocks=[],this.lastBlockPos=2,this.startY=0,this.role=null,this.gameScore=null,this.world=null,this.debugDraw=null,this.mat1=null,this.mat2=null,Gamedata.score=0,this.initView()},e.prototype.refleshView=function(){var t=this;this.world.bodies.forEach(function(e){if(null!=e.displays&&(e.displays[0].x=e.position[0],e.displays[0].y=e.position[1],e.displays[0].rotation=180*e.angle/Math.PI),e.position[1]>t.stage.stageHeight&&e.type===p2.Body.KINEMATIC){e.position[1]=t.startY;var i=Math.random()>.5?t.lastBlockPos+1:t.lastBlockPos-1;i>4&&(i=4),0>i&&(i=0),t.lastBlockPos=i;var s=i*t.stage.stageWidth/5+t.stage.stageWidth/10;e.position[0]=s}}),this.role.update(this.stage.stageHeight)},e.prototype.touchHander=function(t){this.jumpM.play(0,1),this.touchEnabled=!1,t.stageX<this.stage.stageWidth/3?null!=this.role&&this.role.jumpLeft():t.stageX<2*this.stage.stageWidth/3?null!=this.role&&this.role.jumpUp():null!=this.role&&this.role.jumpRight()},e}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var OverScene=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),e}return __extends(e,t),e.prototype.initView=function(){var t=new egret.Shape;t.graphics.beginFill(Gamedata.colorLBlue),t.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),t.graphics.endFill,this.addChild(t),this.endImg=new egret.Bitmap,this.endImg.texture=RES.getRes("end1_png"),this.endImg.width=400,this.endImg.height=400,this.endImg.anchorOffsetX=this.endImg.width/2,this.endImg.anchorOffsetY=this.endImg.height/2,this.endImg.x=this.stage.stageWidth/2,this.endImg.y=this.stage.stageHeight/2-200;var e=new egret.TextField;e.text="Your Score:"+Gamedata.score,e.size=50,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=this.stage.stageWidth/2,e.y=this.stage.stageHeight/2+100,this.addChild(e),this.restartBtn=new egret.Bitmap,this.restartBtn.texture=RES.getRes("restart_png"),this.restartBtn.width=100,this.restartBtn.height=100,this.restartBtn.anchorOffsetX=this.restartBtn.width/2,this.restartBtn.anchorOffsetY=this.restartBtn.height/2,this.restartBtn.x=this.stage.stageWidth/2,this.restartBtn.y=this.stage.stageHeight/2+200,this.restartBtn.touchEnabled=!0,this.restartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.restartGame,this),this.addChild(this.endImg),this.addChild(this.restartBtn);var i=new egret.TextField;i.text="Created By ZiXu Game\n由于赶制匆忙\n如果你发现了问题，错误，可以再修改哟^_^",i.size=20,i.textAlign="center",i.x=this.stage.stageWidth/2-i.width/2,i.y=this.stage.stageHeight-80,this.addChild(i)},e.prototype.restartGame=function(){SceneController.restartGame()},e}(egret.DisplayObjectContainer);__reflect(OverScene.prototype,"OverScene");var SceneController=function(){function t(){this.startScene=new StartScene,this.gameScene=new GameScene,this.overScene=new OverScene}return Object.defineProperty(t,"instance",{get:function(){return this.sceneController||(this.sceneController=new t),this.sceneController},enumerable:!0,configurable:!0}),t.prototype.setStage=function(t){this._stage=t},t.initGame=function(){var t=this.instance._stage;this.instance.gameScene.parent&&(t.removeChild(this.instance.gameScene),this.instance.gameScene=new GameScene),this.instance.overScene.parent&&(t.removeChild(this.instance.overScene),this.instance.overScene=new OverScene),t.addChild(this.instance.startScene)},t.startGameScene=function(){var t=this.instance._stage;this.instance.startScene.parent&&(t.removeChild(this.instance.startScene),this.instance.startScene=new StartScene),this.instance.gameScene.parent&&(t.removeChild(this.instance.gameScene),this.instance.gameScene=new GameScene),this.instance.overScene.parent&&(t.removeChild(this.instance.overScene),this.instance.overScene=new OverScene),Gamedata.score=0,t.addChild(this.instance.gameScene)},t.startGame=function(){Gamedata.hasStart=!0,this.instance.gameScene.startGame()},t.endGame=function(){Gamedata.hasStart=!1;var t=this.instance._stage;t.addChild(this.instance.overScene)},t.pauseGame=function(){Gamedata.isPause?(egret.Ticker.getInstance().resume(),Gamedata.isPause=!1):(egret.Ticker.getInstance().pause(),Gamedata.isPause=!0)},t.restartGame=function(){Gamedata.hasStart=!1;var e=this.instance._stage;e.removeChild(this.instance.overScene),this.instance.gameScene.reInitGame(),t.pauseGame()},t}();__reflect(SceneController.prototype,"SceneController");var StartScene=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),e}return __extends(e,t),e.prototype.initView=function(){this.bg=new egret.Shape,this.bg.graphics.beginFill(Gamedata.colorGreen,1),this.bg.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),this.bg.graphics.endFill(),this.addChild(this.bg),this.bitbg=new egret.Bitmap,this.bitbg.texture=RES.getRes("r1_png"),this.bitbg.width=400,this.bitbg.height=600,this.bitbg.x=this.stage.width/2-this.bitbg.width/2,this.bitbg.y=this.stage.height/2-this.bitbg.height/2-100,this.addChild(this.bitbg),this.startBtn=new egret.Bitmap,this.startBtn.texture=RES.getRes("btn_ksyx_png"),this.startBtn.x=this.stage.width/2-this.startBtn.width/2,this.startBtn.y=this.stage.height/2-this.startBtn.height/2+300,this.addChild(this.startBtn),this.startBtn.touchEnabled=!0,this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("进入主界面"),SceneController.startGameScene()},this)},e}(egret.DisplayObjectContainer);__reflect(StartScene.prototype,"StartScene");var Gamedata=function(){function t(){}return t.score=0,t.colorGreen=6723942,t.colorDRed=13395609,t.colorLred=16764159,t.colorLBlue=6215121,t.collisionBlock=Math.pow(2,0),t.collisionRole=Math.pow(2,1),t.collisionRole2=Math.pow(2,2),t}();__reflect(Gamedata.prototype,"Gamedata");var Block=function(){function t(t,e,i,s,a,r){this.BlockBody=new p2.Body({mass:1,position:[e,i]}),this.BlockBody.type=p2.Body.KINEMATIC,this.BlockBody.gravityScale=0,this.BlockBody.velocity=[0,0],this.BlockBody.damping=0,this.displayContainer=t,this.BlockImg=new egret.Bitmap,this.initShape(s,a,r),this.initImg(s,a)}return t.prototype.initShape=function(t,e,i){var s=new p2.Box({width:t,height:10});s.collisionGroup=Gamedata.collisionBlock,s.collisionMask=Gamedata.collisionRole,s.material=i,this.BlockBody.addShape(s)},t.prototype.initImg=function(t,e){this.BlockImg.texture=RES.getRes("sky_png"),this.BlockImg.width=t,this.BlockImg.height=e,this.displayContainer.addChild(this.BlockImg),this.BlockBody.displays=[this.BlockImg],this.BlockImg.$setAnchorOffsetX(t/2),this.BlockImg.$setAnchorOffsetY(e/2)},t}();__reflect(Block.prototype,"Block");var Role=function(){function t(t,e,i,s,a,r){this.textArr=["听说今天\n有人过生日","那岂不是有吃的？","作为一只兔子\n我是爱吃的","什么要抓我\n做生日礼物","嫦娥姐姐\n有人要抓我………………","我快来不及啦","要干嘛？","哎呀，,我被抓住了"],this.objContainer=t,this.roleBody=new p2.Body({mass:200,position:[e,i]}),this.roleBody.type=p2.Body.DYNAMIC,this.roleBody.gravityScale=100,this.roleBody.damping=0,this.roleBody.fixedRotation=!0,this.rolelImg=new egret.Sprite,this.initShape(s,a,r),this.initImg(s,a)}return t.prototype.initShape=function(t,e,i){this.roleShape=new p2.Box({width:t-20,height:10}),this.roleShape.material=i,this.roleBody.addShape(this.roleShape)},t.prototype.initImg=function(t,e){this.img1=new egret.Bitmap,this.img1.texture=RES.getRes("sitL_png"),this.img1.width=t,this.img1.height=e,this.img1.anchorOffsetX=t/2,this.img1.anchorOffsetY=e,this.img2=new egret.Bitmap,this.img2.texture=RES.getRes("jumpL_png"),this.img2.width=t,this.img2.height=e,this.img2.anchorOffsetX=t/2,this.img2.anchorOffsetY=e,this.img3=new egret.Bitmap,this.img3.texture=RES.getRes("sitR_png"),this.img3.width=t,this.img3.height=e,this.img3.anchorOffsetX=t/2,this.img3.anchorOffsetY=e,this.img4=new egret.Bitmap,this.img4.texture=RES.getRes("jumpR_png"),this.img4.width=t,this.img4.height=e,this.img4.anchorOffsetX=t/2,this.img4.anchorOffsetY=e,this.rolelImg.addChild(this.img1),this.rolelImg.addChild(this.img2),this.rolelImg.addChild(this.img3),this.rolelImg.addChild(this.img4),this.img2.visible=!1,this.img3.visible=!1,this.img4.visible=!1,this.objContainer.addChild(this.rolelImg),this.roleBody.displays=[this.rolelImg],this.tx=new egret.TextField,this.tx.text=this.textArr[0],this.tx.x=t/2,this.tx.y=0-e,this.tx.size=25,this.tx.textColor=Gamedata.colorLBlue,this.tx.fontFamily="KaiTi",this.rolelImg.addChild(this.tx)},t.prototype.jumpLeft=function(){this.roleBody.velocity=[-100,-450]},t.prototype.jumpUp=function(){this.roleBody.velocity=[-0,-450]},t.prototype.jumpRight=function(){this.roleBody.velocity=[100,-450]},t.prototype.update=function(t){this.roleBody.velocity[1]<2?(this.img1.visible=!1,this.img2.visible=!1,this.img3.visible=!1,this.img4.visible=!1,this.roleBody.velocity[0]<0?this.img2.visible=!0:this.img4.visible=!0,this.roleShape.collisionGroup=Gamedata.collisionRole2):(this.img1.visible=!1,this.img2.visible=!1,this.img3.visible=!1,this.img4.visible=!1,this.roleBody.velocity[0]<.1?this.img1.visible=!0:this.img3.visible=!0,this.roleShape.collisionGroup=Gamedata.collisionRole),this.roleBody.position[1]>t&&this.rolelImg.dispatchEventWith("Lose")},t}();__reflect(Role.prototype,"Role");